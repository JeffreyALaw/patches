diff --git a/gcc/config/h8300/testcompare.md b/gcc/config/h8300/testcompare.md
index 81dce1d0bc1..9a7ad903da5 100644
--- a/gcc/config/h8300/testcompare.md
+++ b/gcc/config/h8300/testcompare.md
@@ -178,8 +178,8 @@
 	(compare (match_operand:QHSI 0 "memory_operand" "")
 		 (const_int 0)))]
   ""
-  [(parallel [(set (match_dup 1) (match_dup 0)) (clobber (reg:CC CC_REG))])
-   (set (reg:CC CC_REG) (compare:CC (match_dup 1) (const_int 0)))])
+  [(parallel [(set (reg:CCZN CC_REG) (compare:CCZN (match_dup 0) (const_int 0)))
+	      (set (match_dup 1) (match_dup 0))])])
 
 ;; The compare-elimination pass does not handle memory reference.  So this
 ;; little peephole helps fill the gap and avoid code quality regressions.
