diff --git a/gcc/config/h8300/bitfield.md b/gcc/config/h8300/bitfield.md
index 0d28c750a6a..1e0ed3635de 100644
--- a/gcc/config/h8300/bitfield.md
+++ b/gcc/config/h8300/bitfield.md
@@ -515,3 +515,24 @@ (define_insn "bfst_clobber_flags"
 ;;  "bclr/%j2\t%R1,%0"
 ;;  [(set_attr "length_table" "logicb")])
 
+;; Specialized insn to handle 1 << N
+(define_insn_and_split ""
+  [(set (match_operand:QHSI 0 "register_operand" "=&r")
+	(ashift:QHSI (const_int 1)
+		     (match_operand:QI 1 "register_operand" "r")))
+   (clobber (scratch:QI))]
+  ""
+  "#"
+  "&& reload_completed"
+  [(parallel [(set (match_dup 0)
+		   (ashift:QHSI (const_int 1) (match_dup 1)))
+              (clobber (reg:CC CC_REG))])])
+
+(define_insn ""
+  [(set (match_operand:QHSI 0 "register_operand" "=&r")
+	(ashift:QHSI (const_int 1)
+		     (match_operand:QI 1 "register_operand" "r")))
+   (clobber (reg:CC CC_REG))]
+  "reload_completed"
+  "sub.<sz> %0,%0\;bset %R1,%R0"
+  [(set_attr "length" "4")])
diff --git a/gcc/config/h8300/h8300.md b/gcc/config/h8300/h8300.md
index 018478a6af3..f336284d154 100644
--- a/gcc/config/h8300/h8300.md
+++ b/gcc/config/h8300/h8300.md
@@ -168,6 +168,8 @@ (define_subst_attr "cczn" "subst_cczn" "" "_cczn")
 (define_subst_attr "ccz" "subst_ccz" "" "_ccz")
 (define_subst_attr "cc" "subst_cc" "" "_cc")
 
+(define_mode_attr sz [(QI "b") (HI "w") (SI "l")])
+
 ;; Type of delay slot.  NONE means the instruction has no delay slot.
 ;; JUMP means it is an unconditional jump that (if short enough)
 ;; could be implemented using bra/s.
